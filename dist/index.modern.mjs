function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},t.apply(this,arguments)}const e=/^(https?:)?\/\/a.storyblok.com\/f\/*[0-9]+\/*[0-9]*x*[0-9]*\/[A-Za-z0-9]+\/[\S]+\.[a-zA-Z]+/;function i(t){let i=null,a=null;if("string"==typeof t&&(i=t),"object"==typeof t&&(i=t.image,a=t.base64?t.base64:null),i=e.test(i)?i:null,!i)return!1;let r=i.replace(/^(https?:)?\/\/a.storyblok.com\//,""),[,,n,,l]=r.split("/"),[o,h]=n.split("x").map(t=>parseInt(t,10)),[,s]=l.split(".");return{originalPath:r,extension:s,metadata:{dimensions:{width:o,height:h,aspectRatio:o/h},lqip:a}}}const a=[1,1.5,2,3],r=[.25,.5,1,1.5,2,3],n={quality:100,smartCrop:!0,format:null,fill:null,toFormat:null,base64:null,useBase64:!0},l=t({},n,{maxWidth:800,maxHeight:null}),o=t({},n,{width:400,height:null});function h(t){const e=t.includes("filters:format(webp)"),i=/[a-f0-9]+-\d+x\d+\.webp/.test(t);return e||i}function s(t,e,i){let{width:a,height:r,smartCrop:n,quality:l,format:o,fill:h}=e,[,s]=t.split("."),u="https://img2.storyblok.com";a&&r&&(u+=`/${a}x${r}`),n&&(u+="/smart");let p=[l&&`quality(${l})`,o&&o!==s&&`format(${o})`,h&&`fill(${h})`];return p=p.filter(t=>!0===Boolean(t)),p.length>0&&(u+=function(t){return t.reduce((t,e,i)=>`${t}:${e}`,"/filters")}(p)),u+=`/${t}`,u=u.replace("filters:quality(100)",`filters:quality(100):rotate(${i})`),u}function u(t,{width:e,height:i},a){return s(t,{width:(e/3).toFixed(0),height:(i/3).toFixed(0),quality:10},a)}function p(e,r={}){let n=i(e);if(!n)return null;let l=t({},o,r),{width:p,height:c}=l,{metadata:{dimensions:d},originalPath:f}=n,m=d.aspectRatio;l.height&&(m=p/l.height);let b=null;l.toFormat?b=l.toFormat:h(f)&&(b="jpg");let w=a.map(t=>Math.round(p*t)).filter(t=>t<d.width).reduce((e,i,r)=>{let n=`${a[r]}x`,o=Math.round(i/m),h=t({},l,{width:i,height:o}),u=s(f,t({},h,{format:"webp"})),p=s(f,t({},h,b&&{format:b}));return e.webp.push(`${u} ${n}`),e.base.push(`${p} ${n}`),e},{webp:[],base:[]}),g=Math.round(c||p/m),$=t({},l,{width:p,height:g}),x=s(f,t({},$,b&&{format:b})),y=s(f,t({},$,{format:"webp"}));return{base64:u(f,{width:p,height:c,aspectRatio:m}),aspectRatio:m,width:Math.round(p),height:g,src:x,srcWebp:y,srcSet:w.base.join(",\n")||null,srcSetWebp:w.webp.join(",\n")||null}}function c(e,a={},n=0){let o=i(e);if(!o)return null;let p=t({},l,a),{maxWidth:c}=p,{metadata:{dimensions:d},originalPath:f}=o,m=d.aspectRatio;p.maxHeight&&(m=c/p.maxHeight);let b=p.maxHeight||Math.round(c/d.aspectRatio),w=null;p.toFormat?w=p.toFormat:h(f)&&(w="jpg");let g=p.sizes||`(max-width: ${c}px) 100vw, ${c}px`,$=r.map(t=>Math.round(c*t)).filter(t=>t<d.width).concat(d.width).filter(t=>t<d.width).reduce((e,i)=>{let a={width:i,height:Math.round(i/m)},r=s(f,t({},p,a,{format:"webp"}),n),l=s(f,t({},p,a,{format:w}),n);return e.webp.push(`${r} ${i}w`),e.base.push(`${l} ${i}w`),e},{webp:[],base:[]}),x={width:c,height:b},y=s(f,t({},p,x,{format:w}),n),j=s(f,t({},p,x,{format:"webp"}),n);return{base64:u(f,{width:c,height:b,aspectRatio:m},n),aspectRatio:m,src:y,srcWebp:j,srcSet:$.base.join(",\n")||null,srcSetWebp:$.webp.join(",\n")||null,sizes:g}}export{p as getFixedGatsbyImage,c as getFluidGatsbyImage};
//# sourceMappingURL=index.modern.mjs.map
